{% comment %}
VBK Featured Collection â€“ robust against string/number comparisons
{% endcomment %}

{% assign col = collections[section.settings.collection] %}
{% assign limit_int = section.settings.products_to_show | default: 8 | plus: 0 %}

<section class="vbk-featured-collection color-scheme color-scheme--scheme-1">
  <div class="container">
    {% if section.settings.title != blank %}
      <h2 class="h2">{{ section.settings.title }}</h2>
    {% endif %}

    {% if col and col.products_count | plus: 0 > 0 %}
      <div class="product-grid">
        {% for product in col.products limit: limit_int %}
          <div class="product-card">
            <a href="{{ product.url }}" title="{{ product.title | escape }}">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '540x' }}" alt="{{ product.title | escape }}" loading="lazy">
              {% endif %}
              <h3 class="h5">{{ product.title }}</h3>
              <span class="price">{% render 'price', product: product %}</span>
            </a>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-subdued">No products found in this collection.</p>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "VBK Featured Collection",
  "settings": [
    { "type": "text", "id": "title", "label": "Title", "default": "Shop Best Sellers" },
    { "type": "collection", "id": "collection", "label": "Collection" },
    { "type": "number", "id": "products_to_show", "label": "Products to show", "default": 8, "min": 1, "max": 24 }
  ],
  "presets": [{ "name": "VBK Featured Collection" }]
}
{% endschema %}